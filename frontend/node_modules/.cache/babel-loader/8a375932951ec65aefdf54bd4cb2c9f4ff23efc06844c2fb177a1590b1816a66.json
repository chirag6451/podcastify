{"ast":null,"code":"var _jsxFileName = \"/Users/chiragahmedabadi/dev/podcraftai/frontend/src/components/GoogleAuth.js\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { GoogleLogin, useGoogleLogin } from '@react-oauth/google';\nimport { useNavigate } from 'react-router-dom';\nimport { API_URL } from '../config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GoogleAuth = () => {\n  _s();\n  const navigate = useNavigate();\n  const login = useGoogleLogin({\n    onSuccess: async tokenResponse => {\n      console.log('Login Success:', tokenResponse);\n      try {\n        const response = await fetch(`${API_URL}/api/auth/google/callback`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            code: tokenResponse.access_token,\n            refresh_token: tokenResponse.refresh_token\n          })\n        });\n        const data = await response.json();\n        if (response.ok) {\n          console.log('Successfully authenticated:', data);\n          localStorage.setItem('userEmail', data.email);\n          localStorage.setItem('userId', data.user_id);\n          navigate('/dashboard');\n        } else {\n          console.error('Authentication failed:', data);\n          alert('Authentication failed. Please try again.');\n        }\n      } catch (error) {\n        console.error('Error during authentication:', error);\n        alert('Error during authentication. Please try again.');\n      }\n    },\n    onError: () => {\n      console.log('Login Failed');\n    },\n    scope: 'https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile https://mail.google.com/ https://www.googleapis.com/auth/gmail.modify https://www.googleapis.com/auth/gmail.compose https://www.googleapis.com/auth/gmail.send https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/drive.file https://www.googleapis.com/auth/drive.appdata https://www.googleapis.com/auth/drive.metadata https://www.googleapis.com/auth/youtube https://www.googleapis.com/auth/youtube.upload https://www.googleapis.com/auth/youtube.force-ssl',\n    flow: 'auth-code'\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => login(),\n      children: \"Sign in with Google\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 9\n  }, this);\n};\n_s(GoogleAuth, \"Lfw04slfjC/tspen7VC4VEWfEos=\", false, function () {\n  return [useNavigate, useGoogleLogin];\n});\n_c = GoogleAuth;\nexport default GoogleAuth;\nvar _c;\n$RefreshReg$(_c, \"GoogleAuth\");","map":{"version":3,"names":["React","GoogleLogin","useGoogleLogin","useNavigate","API_URL","jsxDEV","_jsxDEV","GoogleAuth","_s","navigate","login","onSuccess","tokenResponse","console","log","response","fetch","method","headers","body","JSON","stringify","code","access_token","refresh_token","data","json","ok","localStorage","setItem","email","user_id","error","alert","onError","scope","flow","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/chiragahmedabadi/dev/podcraftai/frontend/src/components/GoogleAuth.js"],"sourcesContent":["import React from 'react';\nimport { GoogleLogin, useGoogleLogin } from '@react-oauth/google';\nimport { useNavigate } from 'react-router-dom';\nimport { API_URL } from '../config';\n\nconst GoogleAuth = () => {\n    const navigate = useNavigate();\n\n    const login = useGoogleLogin({\n        onSuccess: async (tokenResponse) => {\n            console.log('Login Success:', tokenResponse);\n            try {\n                const response = await fetch(`${API_URL}/api/auth/google/callback`, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                    },\n                    body: JSON.stringify({\n                        code: tokenResponse.access_token,\n                        refresh_token: tokenResponse.refresh_token\n                    })\n                });\n\n                const data = await response.json();\n                if (response.ok) {\n                    console.log('Successfully authenticated:', data);\n                    localStorage.setItem('userEmail', data.email);\n                    localStorage.setItem('userId', data.user_id);\n                    navigate('/dashboard');\n                } else {\n                    console.error('Authentication failed:', data);\n                    alert('Authentication failed. Please try again.');\n                }\n            } catch (error) {\n                console.error('Error during authentication:', error);\n                alert('Error during authentication. Please try again.');\n            }\n        },\n        onError: () => {\n            console.log('Login Failed');\n        },\n        scope: 'https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile https://mail.google.com/ https://www.googleapis.com/auth/gmail.modify https://www.googleapis.com/auth/gmail.compose https://www.googleapis.com/auth/gmail.send https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/drive.file https://www.googleapis.com/auth/drive.appdata https://www.googleapis.com/auth/drive.metadata https://www.googleapis.com/auth/youtube https://www.googleapis.com/auth/youtube.upload https://www.googleapis.com/auth/youtube.force-ssl',\n        flow: 'auth-code'\n    });\n\n    return (\n        <div>\n            <button onClick={() => login()}>\n                Sign in with Google\n            </button>\n        </div>\n    );\n};\n\nexport default GoogleAuth;\n"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,EAAEC,cAAc,QAAQ,qBAAqB;AACjE,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,OAAO,QAAQ,WAAW;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEpC,MAAMC,UAAU,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACrB,MAAMC,QAAQ,GAAGN,WAAW,CAAC,CAAC;EAE9B,MAAMO,KAAK,GAAGR,cAAc,CAAC;IACzBS,SAAS,EAAE,MAAOC,aAAa,IAAK;MAChCC,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEF,aAAa,CAAC;MAC5C,IAAI;QACA,MAAMG,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGZ,OAAO,2BAA2B,EAAE;UAChEa,MAAM,EAAE,MAAM;UACdC,OAAO,EAAE;YACL,cAAc,EAAE;UACpB,CAAC;UACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;YACjBC,IAAI,EAAEV,aAAa,CAACW,YAAY;YAChCC,aAAa,EAAEZ,aAAa,CAACY;UACjC,CAAC;QACL,CAAC,CAAC;QAEF,MAAMC,IAAI,GAAG,MAAMV,QAAQ,CAACW,IAAI,CAAC,CAAC;QAClC,IAAIX,QAAQ,CAACY,EAAE,EAAE;UACbd,OAAO,CAACC,GAAG,CAAC,6BAA6B,EAAEW,IAAI,CAAC;UAChDG,YAAY,CAACC,OAAO,CAAC,WAAW,EAAEJ,IAAI,CAACK,KAAK,CAAC;UAC7CF,YAAY,CAACC,OAAO,CAAC,QAAQ,EAAEJ,IAAI,CAACM,OAAO,CAAC;UAC5CtB,QAAQ,CAAC,YAAY,CAAC;QAC1B,CAAC,MAAM;UACHI,OAAO,CAACmB,KAAK,CAAC,wBAAwB,EAAEP,IAAI,CAAC;UAC7CQ,KAAK,CAAC,0CAA0C,CAAC;QACrD;MACJ,CAAC,CAAC,OAAOD,KAAK,EAAE;QACZnB,OAAO,CAACmB,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;QACpDC,KAAK,CAAC,gDAAgD,CAAC;MAC3D;IACJ,CAAC;IACDC,OAAO,EAAEA,CAAA,KAAM;MACXrB,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC;IAC/B,CAAC;IACDqB,KAAK,EAAE,ujBAAujB;IAC9jBC,IAAI,EAAE;EACV,CAAC,CAAC;EAEF,oBACI9B,OAAA;IAAA+B,QAAA,eACI/B,OAAA;MAAQgC,OAAO,EAAEA,CAAA,KAAM5B,KAAK,CAAC,CAAE;MAAA2B,QAAA,EAAC;IAEhC;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACR,CAAC;AAEd,CAAC;AAAClC,EAAA,CA/CID,UAAU;EAAA,QACKJ,WAAW,EAEdD,cAAc;AAAA;AAAAyC,EAAA,GAH1BpC,UAAU;AAiDhB,eAAeA,UAAU;AAAC,IAAAoC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}