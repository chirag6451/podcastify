{"ast":null,"code":"var _jsxFileName = \"/Users/chiragahmedabadi/dev/podcraftai/frontend/src/components/GoogleAuth.js\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { useGoogleLogin } from '@react-oauth/google';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = 'http://localhost:8011';\nconst GoogleAuth = () => {\n  _s();\n  const navigate = useNavigate();\n  const login = useGoogleLogin({\n    onSuccess: async tokenResponse => {\n      console.log('Login Success:', tokenResponse);\n      try {\n        // Get user info using the access token\n        const userInfoResponse = await fetch('https://www.googleapis.com/oauth2/v3/userinfo', {\n          headers: {\n            'Authorization': `Bearer ${tokenResponse.access_token}`\n          }\n        });\n        const userInfo = await userInfoResponse.json();\n        console.log('User Info:', userInfo);\n\n        // Send to our backend\n        const response = await fetch(`${API_URL}/api/auth/google/callback`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            code: tokenResponse.access_token\n          })\n        });\n        const data = await response.json();\n        if (response.ok) {\n          console.log('Successfully authenticated:', data);\n          localStorage.setItem('userEmail', data.email);\n          localStorage.setItem('userId', data.user_id);\n          localStorage.setItem('accessToken', tokenResponse.access_token);\n          navigate('/dashboard');\n        } else {\n          console.error('Authentication failed:', data);\n          alert('Authentication failed. Please try again.');\n        }\n      } catch (error) {\n        console.error('Error during authentication:', error);\n        alert('Error during authentication. Please try again.');\n      }\n    },\n    onError: () => {\n      console.log('Login Failed');\n    },\n    scope: 'https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile https://mail.google.com/ https://www.googleapis.com/auth/gmail.modify https://www.googleapis.com/auth/gmail.compose https://www.googleapis.com/auth/gmail.send https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/drive.file https://www.googleapis.com/auth/drive.appdata https://www.googleapis.com/auth/drive.metadata https://www.googleapis.com/auth/youtube https://www.googleapis.com/auth/youtube.upload https://www.googleapis.com/auth/youtube.force-ssl',\n    flow: 'implicit'\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => login(),\n      className: \"google-login-button\",\n      children: \"Sign in with Google\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 9\n  }, this);\n};\n_s(GoogleAuth, \"Lfw04slfjC/tspen7VC4VEWfEos=\", false, function () {\n  return [useNavigate, useGoogleLogin];\n});\n_c = GoogleAuth;\nexport default GoogleAuth;\nvar _c;\n$RefreshReg$(_c, \"GoogleAuth\");","map":{"version":3,"names":["React","useGoogleLogin","useNavigate","jsxDEV","_jsxDEV","API_URL","GoogleAuth","_s","navigate","login","onSuccess","tokenResponse","console","log","userInfoResponse","fetch","headers","access_token","userInfo","json","response","method","body","JSON","stringify","code","data","ok","localStorage","setItem","email","user_id","error","alert","onError","scope","flow","children","onClick","className","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/chiragahmedabadi/dev/podcraftai/frontend/src/components/GoogleAuth.js"],"sourcesContent":["import React from 'react';\nimport { useGoogleLogin } from '@react-oauth/google';\nimport { useNavigate } from 'react-router-dom';\n\nconst API_URL = 'http://localhost:8011';\n\nconst GoogleAuth = () => {\n    const navigate = useNavigate();\n\n    const login = useGoogleLogin({\n        onSuccess: async (tokenResponse) => {\n            console.log('Login Success:', tokenResponse);\n            try {\n                // Get user info using the access token\n                const userInfoResponse = await fetch('https://www.googleapis.com/oauth2/v3/userinfo', {\n                    headers: { \n                        'Authorization': `Bearer ${tokenResponse.access_token}`\n                    }\n                });\n                const userInfo = await userInfoResponse.json();\n                console.log('User Info:', userInfo);\n\n                // Send to our backend\n                const response = await fetch(`${API_URL}/api/auth/google/callback`, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                    },\n                    body: JSON.stringify({\n                        code: tokenResponse.access_token\n                    })\n                });\n\n                const data = await response.json();\n                if (response.ok) {\n                    console.log('Successfully authenticated:', data);\n                    localStorage.setItem('userEmail', data.email);\n                    localStorage.setItem('userId', data.user_id);\n                    localStorage.setItem('accessToken', tokenResponse.access_token);\n                    navigate('/dashboard');\n                } else {\n                    console.error('Authentication failed:', data);\n                    alert('Authentication failed. Please try again.');\n                }\n            } catch (error) {\n                console.error('Error during authentication:', error);\n                alert('Error during authentication. Please try again.');\n            }\n        },\n        onError: () => {\n            console.log('Login Failed');\n        },\n        scope: 'https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile https://mail.google.com/ https://www.googleapis.com/auth/gmail.modify https://www.googleapis.com/auth/gmail.compose https://www.googleapis.com/auth/gmail.send https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/drive.file https://www.googleapis.com/auth/drive.appdata https://www.googleapis.com/auth/drive.metadata https://www.googleapis.com/auth/youtube https://www.googleapis.com/auth/youtube.upload https://www.googleapis.com/auth/youtube.force-ssl',\n        flow: 'implicit'\n    });\n\n    return (\n        <div>\n            <button onClick={() => login()} className=\"google-login-button\">\n                Sign in with Google\n            </button>\n        </div>\n    );\n};\n\nexport default GoogleAuth;\n"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,cAAc,QAAQ,qBAAqB;AACpD,SAASC,WAAW,QAAQ,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE/C,MAAMC,OAAO,GAAG,uBAAuB;AAEvC,MAAMC,UAAU,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACrB,MAAMC,QAAQ,GAAGN,WAAW,CAAC,CAAC;EAE9B,MAAMO,KAAK,GAAGR,cAAc,CAAC;IACzBS,SAAS,EAAE,MAAOC,aAAa,IAAK;MAChCC,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEF,aAAa,CAAC;MAC5C,IAAI;QACA;QACA,MAAMG,gBAAgB,GAAG,MAAMC,KAAK,CAAC,+CAA+C,EAAE;UAClFC,OAAO,EAAE;YACL,eAAe,EAAE,UAAUL,aAAa,CAACM,YAAY;UACzD;QACJ,CAAC,CAAC;QACF,MAAMC,QAAQ,GAAG,MAAMJ,gBAAgB,CAACK,IAAI,CAAC,CAAC;QAC9CP,OAAO,CAACC,GAAG,CAAC,YAAY,EAAEK,QAAQ,CAAC;;QAEnC;QACA,MAAME,QAAQ,GAAG,MAAML,KAAK,CAAC,GAAGV,OAAO,2BAA2B,EAAE;UAChEgB,MAAM,EAAE,MAAM;UACdL,OAAO,EAAE;YACL,cAAc,EAAE;UACpB,CAAC;UACDM,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;YACjBC,IAAI,EAAEd,aAAa,CAACM;UACxB,CAAC;QACL,CAAC,CAAC;QAEF,MAAMS,IAAI,GAAG,MAAMN,QAAQ,CAACD,IAAI,CAAC,CAAC;QAClC,IAAIC,QAAQ,CAACO,EAAE,EAAE;UACbf,OAAO,CAACC,GAAG,CAAC,6BAA6B,EAAEa,IAAI,CAAC;UAChDE,YAAY,CAACC,OAAO,CAAC,WAAW,EAAEH,IAAI,CAACI,KAAK,CAAC;UAC7CF,YAAY,CAACC,OAAO,CAAC,QAAQ,EAAEH,IAAI,CAACK,OAAO,CAAC;UAC5CH,YAAY,CAACC,OAAO,CAAC,aAAa,EAAElB,aAAa,CAACM,YAAY,CAAC;UAC/DT,QAAQ,CAAC,YAAY,CAAC;QAC1B,CAAC,MAAM;UACHI,OAAO,CAACoB,KAAK,CAAC,wBAAwB,EAAEN,IAAI,CAAC;UAC7CO,KAAK,CAAC,0CAA0C,CAAC;QACrD;MACJ,CAAC,CAAC,OAAOD,KAAK,EAAE;QACZpB,OAAO,CAACoB,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;QACpDC,KAAK,CAAC,gDAAgD,CAAC;MAC3D;IACJ,CAAC;IACDC,OAAO,EAAEA,CAAA,KAAM;MACXtB,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC;IAC/B,CAAC;IACDsB,KAAK,EAAE,ujBAAujB;IAC9jBC,IAAI,EAAE;EACV,CAAC,CAAC;EAEF,oBACIhC,OAAA;IAAAiC,QAAA,eACIjC,OAAA;MAAQkC,OAAO,EAAEA,CAAA,KAAM7B,KAAK,CAAC,CAAE;MAAC8B,SAAS,EAAC,qBAAqB;MAAAF,QAAA,EAAC;IAEhE;MAAAG,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACR,CAAC;AAEd,CAAC;AAACpC,EAAA,CAzDID,UAAU;EAAA,QACKJ,WAAW,EAEdD,cAAc;AAAA;AAAA2C,EAAA,GAH1BtC,UAAU;AA2DhB,eAAeA,UAAU;AAAC,IAAAsC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}